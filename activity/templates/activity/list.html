{% extends "activity/base.html" %}
{% load staticfiles %}

{% block title %}Activity Log | {{ sitename }}{% endblock %}

{% block main %}
	<section class="pT-8 pB-16">
		<div class="_layout layout-L mdl-grid">
			<div class="mdl-cell mdl-cell--12-col">
				<div class="wide-card row fill">
					<div class="head-title">Activity Log</div>
					<div class="mR-8">
					{% for tab in query_tabs %}
						<a href="{{ tab.url }}" class="md-tabs__tab {{ tab.css }}" title="{{ tab.help_text }}">
							<span class="tab-label bL">{{ tab.name }}</span>
						</a>
					{% endfor %}
					</div>
				</div>
			</div>
			{% comment %} Statistics graph {% endcomment %}
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">
	google.charts.load('current', {packages: ['corechart', 'bar']});
	google.charts.setOnLoadCallback(drawStuff);
	
	function drawStuff() {
		var data = google.visualization.arrayToDataTable([
				['Action', {% for s in stats %}'{{ s.name }}',{ role: 'annotation' },{% endfor %}],
				['Count', {% for s in stats %}{{ s.value }},'{{ s.name }}',{% endfor %}],
			]);
		
		var options = {
			title: '',
			isStacked: 'false',//'absolute/relative/percent'
			height: 120,
			chartArea: {width: '80%', height: '60%'},
			legend: { position: "none" },
			hAxis: {
				title: '',
				minValue: 0,
			},
			vAxis: {
				title: ''
			}
		};
		var chart = new google.visualization.BarChart(document.getElementById('chart_div'));
		chart.draw(data, options);
	};
</script>
			<div class="mdl-cell mdl-cell--12-col mT0 mB0">
				<div class="activity wide-card bCw wFull">
					<div id="chart_div" style=""></div>
				</div>
			</div>
		{% if actions %} {% comment %} Display the list {% endcomment %}
			{% for action in actions %}
			<div class="mdl-cell mdl-cell--12-col mT0 mB0">
			{% include "activity/include/activity-card.html" with action=action %}
			</div>
			{% endfor %}
			{% include "activity/include/pagination-bottom.html" with items=actions %}
		{% else %}{% comment %} Display the notification {% endcomment %}
			<div class="mdl-cell mdl-cell--12-col mT0 mB0">
			{% include "activity/include/empty-result.html" %}
			</div>
		{% endif %}
		</div>
	</section>
{% endblock %}
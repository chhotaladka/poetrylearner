{% extends "crawlers/base.html" %}

{% block title %}
	List of crawled article
{% endblock %}

{% block main %}

	<section id="msgPannel" class="pT-8 pB-8">
		<div class="mdl-poetry__post mdl-grid">
			<div class="mdl-card bC-none mdl-cell mdl-cell--12-col">							

{% if articles %} {% comment %} Display the list {% endcomment %}				
				<div class="mdl-card__supporting-text stats-text">		            
					Displaying {{ articles|length }} of {{ articles.paginator.count }} crawled articles.
				</div>
				<div class="mdl-card__supporting-text pTB-0 mdl-color-text--grey-600">		            
					{% include "common/include/pagination.html" with obj_list=articles getvars=getvars only %}
				</div>

				<div class="mdl-card__supporting-text mdl-color-text--grey-600">
					<div class="table--large">
					<table class="mdl-data-table mdl-js-data-table wSn">
						<thead>
							<tr>
						    	<th>ID</th>
						    	<th class="mdl-data-table__cell--non-numeric">Title</th>
						    	<th class="mdl-data-table__cell--non-numeric">Author</th>
						    	<th class="mdl-data-table__cell--non-numeric">Source</th>
						    	<th>Added at</th>
						    	<th class="mdl-data-table__cell--non-numeric">Valid</th>
						    	<th class="mdl-data-table__cell--non-numeric">Snippet</th>
						    </tr>
						</thead>						
						<tbody>
							{% for article in articles %}
							<tr>
								<td>{{ forloop.counter }}</td>
								<td class="mdl-data-table__cell--non-numeric">
									<a href="{{article.get_absolute_url}}" title="View article" target="_blank">{{ article.get_title }}</a>
								</td>
								<td class="mdl-data-table__cell--non-numeric">
									<a href="{% url 'crawlers:author-list'%}/?q={{ article.get_author }}" title="Search in crawled authors">{{ article.get_author }}</a>
								</td>
								<td class="mdl-data-table__cell--non-numeric">
									<a href="{{ article.get_source_url }}" title="Visit source" target="_blank">{{ article.get_source_url | truncatechars:30}}</a>
								</td>
								<td title="{{article.added_at}}">{{ article.added_at | date }}</td>
								<td class="mdl-data-table__cell--non-numeric">{{ article.get_validity }}</td>
								<td class="mdl-data-table__cell--non-numeric">
									<a href="{{article.snippet.get_absolute_url}}" title="View snippet" target="_blank">{{ article.snippet.id }}</a>
								</td>
							</tr>
							{% endfor %}
						</tbody>
					</table>
					</div>
				</div>
				
				<div class="mdl-card__supporting-text pTB-0 mdl-color-text--grey-600">		            
					{% include "common/include/pagination.html" with obj_list=articles getvars=getvars only %}
				</div>
{% else %}  {% comment %} Display the notification {% endcomment %}
				<div class="mdl-card__supporting-text oops-message">
					<i class="material-icons md-48">error_outline</i>	            
					<h6>Oops!! No data found for this query.</h6>
				</div>
{% endif %}					
			</div>					
		</div>	
	</section>

{% endblock %}

{% block search %}
			<form action="" method="get">
				<div class="mdl-textfield mdl-js-textfield mdl-textfield--expandable
			                  mdl-textfield--floating-label mdl-textfield--align-right">
			        <label class="mdl-button mdl-js-button mdl-button--icon"
			               for="search-keyword" title="Search title, author, poetry and source in the crawled articles">
			          <i class="material-icons">search</i>
			        </label>
			        <div class="mdl-textfield__expandable-holder">
			          <input class="mdl-textfield__input" type="text" name="q"
			                 id="search-keyword" placeholder="Search in the crawled articles" />
					</div>
				</div>
			</form>
{% endblock %}				
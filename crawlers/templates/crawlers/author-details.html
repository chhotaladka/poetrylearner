{% extends "crawlers/base.html" %}
{% load staticfiles %}

{% block title %}{{ author.get_name }} | Crawled Author{% endblock %}
{% block breadcrumbs %}
<div class="pT-8 pB-8">
	<div class="_layout">					
		<div class="breadcrumbs wFull">
			<a href="{% url 'crawlers:dashboard' %}">Crawled data</a>
			<span> / </span>
			<a href="{% url 'crawlers:article-list' %}">author</a>
			<span> / </span>	
			<span>{{ author.get_name }}</span>		 	
		</div>					
	</div>	
</div>
{% endblock %}
{% block main %}

	<section id="id-section-main" class="p-8">
		<div class="mdl-poetry__post mdl-grid">
			
			<div id="id-author-card" class="mdl-card mdl-cell mdl-cell--4-col mdl-cell--8-col-tablet mdl-cell--top bS-1 wFull">
				<div class="row nav-panel mdl-card__actions">
					{% with prev_author=author.get_previous %}
					<a href="{% url 'crawlers:author-details' pk=prev_author.id %}">
						<button id="id-prev-btn" class="action-button" title="Previous Author {{prev_author.get_name}}">
			                <i class="material-icons md-36" role="presentation">arrow_back</i>			                
						</button>
					</a>
					{% endwith %}																		
					<div class="mdl-layout-spacer"></div>
					{% with next_author=author.get_next%}
					<a href="{% url 'crawlers:author-details' pk=next_author.id %}">
						<button id="id-next-btn" class="action-button" title="Next Author {{next_author.get_name}}">							
			                <i class="material-icons md-36" role="presentation">arrow_forward</i>			                
						</button>
					</a>
					{% endwith %}
					
				</div>	
				<div class="info-list mdl-card__supporting-text mdl-color-text--grey-500">					
						<div>ID <b>{{author.id}}</b></div>
						<div>Name: <span id="id-author-name">{{ author.get_name }}</span></div>
						<div>Birth: <span>{{ author.get_birth_date }}</span></div>
						<div>Death: <span>{{ author.get_death_date }}</span></div>						
						<div>
							<span>Reference:</span>
							<a title="{{ author.source_url }}" href="{{ author.source_url }}">URL of the source</a>
						</div>
						<div>Added at <span>{{ author.added_at }}</span></div>					
						<div>Validity <span id="id-validity">{{ author.valid }}</span></div>										
				</div>
				<div class="action-panel mdl-card__actions mdl-card--border">
					<a href="{% url 'crawlers:article-list' %}?author={{ author.get_name }}">
						<button id="id-list-btn" class="action-button" title="List crawled articles by {{ author.get_name }}">
			                <i class="material-icons" role="presentation">list</i>
			                <span class="action-button__text">List crawled articles</span>
			                <span class="action-button__text">(</span>
			                <span class="action-button__text"><b>{{ articles.total }}</b></span>
			                <span class="action-button__text">)</span>
						</button>
					</a>					
					{% if not author.get_validity %}
					{% comment %} Provide a button to add this author to main database i.e. projects.Author {% endcomment %}					
					<button id="id-add-btn" class="action-button" title="Add {{ author.get_name }} to main database">						
		                <i class="material-icons" role="presentation">person_add</i>
		                <span class="action-button__text">Add author to person@repository</span>		                
					</button>
					{% else %}
					{% comment %}  Auhtor is valid. So, there should be her/his entry in main database of Author i.e. projects.Author. Take me there {% endcomment %}
					<a href="{% url 'repository:list' type='person' %}?q={{ author.get_name }}">
						<button id="id-find-btn" class="action-button" title="Find {{ author.get_name }} in main database">						
			                <i class="material-icons" role="presentation">search</i>
			                <span class="action-button__text">Search this author in person@repository</span>		                
						</button>
					</a>				
					{% endif %}
					
				</div>																		
			</div>

			<div id="id-div-form" class="mdl-cell mdl-cell--8-col hidden">
			{% comment %} update the AJAX response of add-person request here {% endcomment %}
				<div class="mdl-card author-card--lg bS-1 wFull">	
					<div id="id-div-form-body" class="">			
					</div>
					<div class="mdl-card__menu">
						<button class="mdl-button mdl-js-button mdl-button--icon" id="id-dismiss" title="Dismiss the form">
			              <i class="material-icons mdl-color-text--grey-600">close</i>
						</button>
					</div>
				</div>		
			</div>
										
		</div>	
	</section>

{% endblock %}

{% block search-form-action %}
	{% url 'crawlers:author-list' %}
{% endblock %}

{% block scripts %}
	{{ block.super }}
	{% if not author.get_validity %}
	<script type="text/javascript" src="{% static 'js/crawlers/author.js' %}"></script>
	{% endif %}		
{% endblock %}
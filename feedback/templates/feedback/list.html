{% extends "dashboard-base.html" %}
{% load staticfiles %}

{% block title %}Feedbacks{% endblock %}
{% block modal %}
	<div id="imgModal" class="modal fade" role="dialog">
	  <div class="modal-dialog">
	
	    <!-- Modal content-->
	    <div class="modal-content">
    		<div class="mdl-card mdl-cell mdl-cell--12-col mdl-color-text--grey-600">
				<div class="mdl-card__title mdl-card--border ">
					<h3 class="mdl-card__subtitle-text mdl-color-text--teal-400">Upload scanned page image</h3>
				</div>
				<div class="mdl-card__supporting-text flash-msg">
					<div id="modal-flashMsg" role="alert">
					  <i class="material-icons"></i>
					  <span class="message"></span>
					</div>
				</div>
				<div class="mdl-card__supporting-text">
					<div id="imgModalBody">
						<p>Let there be light!</p>
					</div>
				</div>				
				<div class="mdl-card__menu">
				    <button data-dismiss="modal" class="mdl-button mdl-button--icon mdl-js-button">
						<i class="material-icons">close</i>
				    </button>					  
				</div>					
			</div>
	    </div>
	
	  </div>
	</div> <!-- /imgModal -->
{% endblock %}

{% block extra-style %}
	<link rel="stylesheet" href="{% static "css/modal.css" %}">
{% endblock %}
		
{% block scripts %}
	{{ block.super }}
	<script type="text/javascript" src="{% static 'feedback/js/feedback.js' %}"></script>
	<script type="text/javascript" src="{% static 'js/modal.js' %}"></script>			
{% endblock %}

{% block headbanner %}
<section id="id-head" class="centered">
	<div class="head__banner small feedback">
		<div class="head__subtitle">
			Feedbacks.		 					
		</div>
	</div>				
</section>
{% endblock %}
{% block breadcrumbs %}
<div class="pT-8 pB-8">
	<div class="_layout">					

		<div class="md-tabs">
			<div class="md-tabs__tab-bar">
				<a href="{{ request.path }}?tab=all" class="md-tabs__tab is-active" title="Recent feedbacks">all</a>
				<a href="{{ request.path }}?tab=pending" class="md-tabs__tab" title="Feedbacks to which we have not acted">pending</a>
				<a href="{{ request.path }}?tab=closed" class="md-tabs__tab" title="Feedbacks to which we have responded">closed</a>
				<a href="{{ request.path }}?tab=anonymous" class="md-tabs__tab" title="Feedbacks by anonymous users">by Doe</a>
				<a href="{{ request.path }}?tab=known" class="md-tabs__tab" title="User has account or have given email id">by known</a>
			</div>
		</div>										 	
				
	</div>	
</div>
{% endblock %}
{% block main %}

	<section class="p-8">
		<div class="mdl-poetry__post mdl-grid">
			<div class="mdl-card bC-none mdl-cell mdl-cell--12-col">							

{% if feedbacks %} {% comment %} Display the list {% endcomment %}
				{% comment %} Pagination {% endcomment %}				
				<div class="mdl-card__supporting-text stats-text">		            
					{{ feedbacks.paginator.count }} feedbacks.
				</div>
				{% if feedbacks.paginator.num_pages > 1 %}
				<div class="mdl-card__supporting-text pTB-0 mdl-color-text--grey-600">		            
					{% include "common/include/pagination.html" with obj_list=feedbacks getvars=getvars only %}
				</div>
				{% endif %}			
				
				{% comment %} Article list table {% endcomment %}
				<div class="mdl-color-text--grey-600">
					<div class="table--large">
					<table class="mdl-data-table mdl-js-data-table mdl-data-table--selectable wSn">
						<thead>
							<tr>
						    	<th>ID</th>
						    	<th class="mdl-data-table__cell--non-numeric">Date</th>
						    	<th class="mdl-data-table__cell--non-numeric">Page</th>
						    	<th class="mdl-data-table__cell--non-numeric">Given by</th>
						    	<th class="mdl-data-table__cell--non-numeric">Feedback</th>
						    	<th class="mdl-data-table__cell--non-numeric">Action taken</th>
						    </tr>
						</thead>						
						<tbody id="id-tbody">
							{% for feedback in feedbacks %}
							<tr data-id={{ feedback.id }}>
								<td>{{ forloop.counter }}</td>
								<td class="mdl-data-table__cell--non-numeric">{{ feedback.date_added }}</td>								
								<td class="mdl-data-table__cell--non-numeric">
									<a href="{{ feedback.get_page_url }}" title="{{ feedback.get_page_url }}">url</a>
									{% if feedback.content_object %}
									<span> | </span>
									<a href="{{ feedback.get_content_url }}" title="{{ feedback.get_content_url }}">content</a>
									{% endif %}
								</td>
								<td class="mdl-data-table__cell--non-numeric">{{ feedback.get_user_email }}</td>
								<td class="mdl-data-table__cell--non-numeric">{{ feedback.get_text }}</td>								
								<td class="mdl-data-table__cell--non-numeric">
									{{ feedback.get_action_taken }}
								</td>
							</tr>
							{% endfor %}
						</tbody>
					</table>
					</div>
				</div>
				{% comment %} Pagination {% endcomment %}
				{% if feedbacks.paginator.num_pages > 1 %}
				<div class="mdl-card__supporting-text pTB-0 mdl-color-text--grey-600">		            
					{% include "common/include/pagination.html" with obj_list=feedbacks getvars=getvars only %}
				</div>
				{% endif %}
{% else %}  {% comment %} Display the notification {% endcomment %}
				<div class="mdl-card__supporting-text oops-message">
					<i class="material-icons md-48">error_outline</i>	            
					<h6>Oops!! No data found for this query.</h6>
				</div>
{% endif %}					
			</div>					
		</div>	
	</section>

{% endblock %}
{% comment %}
	Info:       Poetry full detail Card
	Requires:   1) css and js of static/mdl/*
				2) bookmark.js(bookmark-button.html), like.js(like-button.html)
{% endcomment %}
{% load staticfiles %}
{% load humanize %}
{% load common_tags %}

<div class="mdl-card card-l poetry-card wFull bS-1" itemscope itemtype="http://schema.org/CreativeWork">
{% with poetry_url=poetry.get_absolute_url %}
	<meta itemprop="genre" content="poetry"/>
	<div class="title mdl-card__title mdl-card--expand">
		<h2 class="title-text mdl-card__title-text" itemprop="name">														
			{{ poetry.headline }}
		</h2>
	</div>		
	<div class="details">
		<div class="mB4" itemprop="creator" itemscope itemtype="http://schema.org/Person">
			<span>By</span>
			<a title="View the creator" href="{{ poetry.creator.get_absolute_url }}" itemprop="url">
				<span itemprop="name">{{ poetry.creator.name }}</span>			
			</a>
		</div>	
		<div class="mB4">					
			<a class="hashtag pretty-link" href="{% url 'repository:list' type='poetry' %}?lan={{ poetry.language }}">
				<s>#</s>
				<b><meta itemprop="inLanguage" content="{{ poetry.language }}"/>{{ poetry.get_language }}</b>
			</a>							
			{% for tag in poetry.get_tags_slugs %}
	 		<a class="hashtag pretty-link" href="{% url 'repository:tagged-poetry' slug=tag %}">
	 			<s>#</s>
				<b itemprop="keywords">{{ tag }}</b>
			</a>
			{% endfor %}
			{% if request.user|has_group:"administrator,editor" %}
			{% if poetry.is_published %}
			<span class="publish" title="Published">
				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" enable-background="new 0 0 50 50" width="13" height="13" style="fill: rgb(51, 51, 51);">
				    <path d="M 11 4 C 7.1 4 4 7.1 4 11 L 4 39 C 4 42.9 7.1 46 11 46 L 39 46 C 42.9 46 46 42.9 46 39 L 46 15 L 44 17.3125 L 44 39 C 44 41.8 41.8 44 39 44 L 11 44 C 8.2 44 6 41.8 6 39 L 6 11 C 6 8.2 8.2 6 11 6 L 37.40625 6 L 39 4 L 11 4 z M 43.25 7.75 L 23.90625 30.5625 L 15.78125 22.96875 L 14.40625 24.4375 L 23.3125 32.71875 L 24.09375 33.4375 L 24.75 32.65625 L 44.75 9.03125 L 43.25 7.75 z"/>
				</svg>			
			</span>			
			{% endif %}{% endif %}								
		</div>			
	</div>
	<div class="content p-16">
		<div lang="{{ poetry.language }}" class="poetry-stanza fS16" itemprop="text">{{ poetry.body }}</div>
	</div>
	<div class="action-panel mdl-card__actions mdl-card--border mdl-color-text--grey-700">
		<button id="shareBtn" class="action-button oN" title="Worth sharing?" 
			onclick="document.getElementById('sharePanel').classList.toggle('hidden'); return false;">
            <i class="material-icons" role="presentation">share</i>
            <span class="action-button__text">Share</span>	                
		</button>		
		{% comment %}  Include BOOKMARK button {% endcomment %}
		{% include "repository/include/misc/bookmark-button.html" with item=poetry %}									
	</div>
	{% comment %}  Include share panel {% endcomment %}
	{% include "repository/include/misc/share-panel.html" with item=poetry %}	
	{% comment %}  Include meta panel {% endcomment %}
	{% include "repository/include/misc/meta-panel.html" with item=poetry %}
	
	<div class="mdl-card__menu">
		<button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" id="btn1">
          <i class="material-icons">more_vert</i>
		</button>
        <ul class="mdl-menu mdl-js-menu mdl-menu--bottom-right" for="btn1">
	      	<a class="mdl-menu__item" href="{% url 'repository:publish' type=poetry.item_type pk=poetry.id slug=poetry.get_slug %}">  
	      	{% if poetry.is_published %}Unpublish{% else %}Publish{% endif %}
	      	</a>
	      	<a class="mdl-menu__item" href="{{ poetry.get_edit_url }}/?cancel={{ request.path }}" title="Edit to improve the article" >
	      		Edit
	      	</a>
        </ul>
	</div>													
{% endwith %}
</div>
<div class="card-l">
	<div class="feedback link tAr">
		<a id="feedbackBtn" data-url="{% url 'feedback:add_for_content' ctype_id=poetry.get_content_type.id obj_id=poetry.id %}" href="#">Feedback</a>
	</div>
</div>